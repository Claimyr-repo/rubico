/**
 * rubico v1.6.23
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2021 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(n,t){"object"==typeof module?module.exports=t:"function"==typeof define?define((()=>t)):n.groupBy=t}("object"==typeof globalThis?globalThis:this,function(){"use strict";const n=()=>new Map,t=n=>null!=n&&"function"==typeof n.then,e=Symbol.for("placeholder"),o=function(n,t,o,r){return t==e?((n,t,e)=>function(o){return n(o,t,e)})(n,o,r):o==e?((n,t,e)=>function(o){return n(t,o,e)})(n,t,r):((n,t,e)=>function(o){return n(t,e,o)})(n,t,o)},r=function(n,t,o,r){return t==e?((n,t,e)=>function(...o){return n(o,t,e)})(n,o,r):o==e?((n,t,e)=>function(...o){return n(t,o,e)})(n,t,r):((n,t,e)=>function(...o){return n(t,e,o)})(n,t,o)},u=Array.isArray,c=Object.values,i=Object.prototype.toString,f=n=>i.call(n),a=async function(n,e,o){let r=n.next();if(r.done)return o;for(;!r.done;)o=e(o,r.value),t(o)&&(o=await o),r=n.next();return o},l=function(n,r,u){let c=n.next();if(c.done)return u;for(void 0===u&&(u=c.value,c=n.next());!c.done;){if(u=r(u,c.value),t(u))return u.then(o(a,n,r,e));c=n.next()}return u},s=async function(n,t,e){let o=await n.next();if(o.done)return e;for(void 0===e&&(e=o.value,o=await n.next());!o.done;)e=await t(e,o.value),o=await n.next();return e},y=Symbol.iterator,p=Symbol.asyncIterator,d=function(n,t,o){return t==e?((n,t)=>function(e){return n(e,t)})(n,o):((n,t)=>function(e){return n(t,e)})(n,t)},h=async function(n,e,o,r){const u=n.length;for(;++r<u;)o=e(o,n[r]),t(o)&&(o=await o);return o},v=function(n,o,r){const u=n.length;let c=-1;for(void 0===r&&(r=n[++c]);++c<u;)if(r=o(r,n[c]),t(r))return r.then((i=h,a=o,l=e,s=c,(f=n)==e?((n,t,e,o)=>function(r){return n(r,t,e,o)})(i,a,l,s):a==e?((n,t,e,o)=>function(r){return n(t,r,e,o)})(i,f,l,s):l==e?((n,t,e,o)=>function(r){return n(t,e,r,o)})(i,f,a,s):((n,t,e,o)=>function(r){return n(t,e,o,r)})(i,f,a,l)));var i,f,a,l,s;return r},b=(n,t)=>function(...e){return t(n(...e))},x=(n,o)=>function(r,u){const c=n(r,u);return t(c)?c.then(d(o,e,u)):o(c,u)},g=function(n,t,i){const a=n[0];return u(a)?v(a,t,i):"function"==typeof a?"[object GeneratorFunction]"==f(a)?((n,t,r)=>b(n,o(l,e,t,r)))(a,t,i):(n=>"[object AsyncGeneratorFunction]"==f(n))(a)?((n,t,r)=>b(n,o(s,e,t,r)))(a,t,i):r(g,e,1==n.length?x(t,a):n.reduce(x,t),i):null==a?void 0===i?d(t,a,e):t(i,a):"function"==typeof a[y]?l(a[y](),t,i):"function"==typeof a[p]?s(a[p](),t,i):"function"==typeof a.reduce?a.reduce(t,i):"function"==typeof a.chain?a.chain(d(t,i,e)):"function"==typeof a.flatMap?a.flatMap(d(t,i,e)):a.constructor==Object?v(c(a),t,i):void 0===i?d(t,a,e):t(i,a)},j=function(n,u){return"function"==typeof u?function(...r){const c=u(...r);return t(c)?c.then(o(g,r,n,e)):g(r,n,c)}:r(g,e,n,u)},w=function(n,t,e){const o=n.get(t);return null==o?n.set(t,[e]):o.push(e),n};return r=>{return j("function"==typeof r?(c=r,function(n,r){const u=c(r);return t(u)?u.then(o(w,n,e,r)):w(n,u,r)}):(u=r,function(n,t){return w(n,t[u],t)}),n);var u,c}}());
