/**
 * rubico v1.6.5
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2020 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(n,t){"object"==typeof module?module.exports=t:"function"==typeof define?define((()=>t)):n.transform=t}("object"==typeof globalThis?globalThis:this,function(){"use strict";const n=n=>null!=n&&"function"==typeof n.then,t=Symbol.for("placeholder"),r=function(n,r,e,o){return r==t?((n,t,r)=>function(e){return n(e,t,r)})(n,e,o):e==t?((n,t,r)=>function(e){return n(t,e,r)})(n,r,o):((n,t,r)=>function(e){return n(t,r,e)})(n,r,e)},e=Array.isArray,o=ArrayBuffer.isView,u=function(n,r,e){return r==t?((n,t)=>function(r){return n(r,t)})(n,e):((n,t)=>function(r){return n(t,r)})(n,r)},c=function(){},i=(n,t)=>n+t,f=Object.values,a=Object.prototype.toString,l=n=>a.call(n),s=async function(t,r,e){let o=t.next();if(o.done)return e;for(;!o.done;)e=r(e,o.value),n(e)&&(e=await e),o=t.next();return e},y=function(e,o,u){let c=e.next();if(c.done)return u;for(void 0===u&&(u=c.value,c=e.next());!c.done;){if(u=o(u,c.value),n(u))return u.then(r(s,e,o,t));c=e.next()}return u},d=async function(n,t,r){let e=await n.next();if(e.done)return r;for(void 0===r&&(r=e.value,e=await n.next());!e.done;)r=await t(r,e.value),e=await n.next();return r},p=Symbol.iterator,h=Symbol.asyncIterator,v=async function(t,r,e,o){const u=t.length;for(;++o<u;)e=r(e,t[o]),n(e)&&(e=await e);return e},b=function(r,e,o){const u=r.length;let c=-1;for(void 0===o&&(o=r[++c]);++c<u;)if(o=e(o,r[c]),n(o))return o.then((i=v,a=e,l=t,s=c,(f=r)==t?((n,t,r,e)=>function(o){return n(o,t,r,e)})(i,a,l,s):a==t?((n,t,r,e)=>function(o){return n(t,o,r,e)})(i,f,l,s):l==t?((n,t,r,e)=>function(o){return n(t,r,o,e)})(i,f,a,s):((n,t,r,e)=>function(o){return n(t,r,e,o)})(i,f,a,l)));var i,f,a,l,s;return o},g=(n,t)=>function(...r){return t(n(...r))},w=(r,e)=>function(o,c){const i=r(o,c);return n(i)?i.then(u(e,t,c)):e(i,c)},j=function(n,o,c){const i=n[0];return e(i)?b(i,o,c):"function"==typeof i?"[object GeneratorFunction]"==l(i)?((n,e,o)=>g(n,r(y,t,e,o)))(i,o,c):(n=>"[object AsyncGeneratorFunction]"==l(n))(i)?((n,e,o)=>g(n,r(d,t,e,o)))(i,o,c):(a=j,s=t,v=1==n.length?w(o,i):n.reduce(w,o),x=c,s==t?((n,t,r)=>function(...e){return n(e,t,r)})(a,v,x):v==t?((n,t,r)=>function(...e){return n(t,e,r)})(a,s,x):((n,t,r)=>function(...e){return n(t,r,e)})(a,s,v)):null==i?void 0===c?u(o,i,t):o(c,i):"function"==typeof i[p]?y(i[p](),o,c):"function"==typeof i[h]?d(i[h](),o,c):"function"==typeof i.reduce?i.reduce(o,c):"function"==typeof i.chain?i.chain(u(o,c,t)):"function"==typeof i.flatMap?i.flatMap(u(o,c,t)):i.constructor==Object?b(f(i),o,c):void 0===c?u(o,i,t):o(c,i);var a,s,v,x},x=Object.assign,m=function(n,t){return e(t)?function(n,t){const r=n.length,e=t.length;let o=-1;for(;++o<e;)n[r+o]=t[o];return n}(n,t):(n.push(t),n)},S=function(n,t){const r=n.length,e=new n.constructor(r+t.length);return e.set(n),e.set(t,r),e},O=function(n,t){return e(t)||o(t)?S(n,t):S(n,[t])},A=function(n,t){return null!=(r=t)&&"function"==typeof r.pipe?((n,t)=>new Promise(((n,t)=>function(r,e){var o,u;t.on("data",(n=>function(t,r,e){return n.write(t,r,e),n})(n)),t.on("end",(o=r,u=n,function(){return o(u)})),t.on("error",e)})(n,t)))(n,t):(n.write(t),n);var r},F=function(n,t){if(null!=t&&t.constructor==Set){for(const r of t)n.add(r);return n}return n.add(t)},G=function(n,t){return n.concat(t)},M=function(t,r,e){const o=j(t,r(c),null);return n(o)?o.then((u=e,function(){return u})):e;var u},T=function(r,c,f){if(e(f))return j(r,c(m),f);if(o(f)){const e=j(r,c(m),[]);return n(e)?e.then(u(O,f,t)):O(f,e)}if(null==f)return M(r,c,f);const a=f.constructor;return"string"==typeof f||a==String?j(r,c(i),f):"function"==typeof f.concat?j(r,c(G),f):"function"==typeof f.write?j(r,c(A),f):a==Set?j(r,c(F),f):a==Object?j(r,c(x),f):M(r,c,f)};return function(e,o){return"function"==typeof o?function(...u){const c=o(...u);return n(c)?c.then(r(T,u,e,t)):T(u,e,c)}:function(...n){return T(n,e,o)}}}());
