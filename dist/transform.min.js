/**
 * rubico v1.6.29
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2021 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(n,t){"object"==typeof module?module.exports=t:"function"==typeof define?define((()=>t)):n.transform=t}("object"==typeof globalThis?globalThis:this,function(){"use strict";const n=n=>null!=n&&"function"==typeof n.then,t=Symbol.for("placeholder"),r=function(n,r,e,o){return r==t?((n,t,r)=>function(e){return n(e,t,r)})(n,e,o):e==t?((n,t,r)=>function(e){return n(t,e,r)})(n,r,o):((n,t,r)=>function(e){return n(t,r,e)})(n,r,e)},e=Array.isArray,o=ArrayBuffer.isView,u=function(n,r,e){return r==t?((n,t)=>function(r){return n(r,t)})(n,e):((n,t)=>function(r){return n(t,r)})(n,r)},c=function(){},f=(n,t)=>n+t,i=Object.values,a=Object.prototype.toString,l=n=>a.call(n),s=async function(t,r,e){let o=t.next();if(o.done)return e;for(;!o.done;)e=r(e,o.value),n(e)&&(e=await e),o=t.next();return e},y=function(e,o,u){let c=e.next();if(c.done)return u;for(void 0===u&&(u=c.value,c=e.next());!c.done;){if(u=o(u,c.value),n(u))return u.then(r(s,e,o,t));c=e.next()}return u},d=async function(n,t,r){let e=await n.next();if(e.done)return r;for(void 0===r&&(r=e.value,e=await n.next());!e.done;)r=await t(r,e.value),e=await n.next();return r},p=Symbol.iterator,h=Symbol.asyncIterator,v=async function(t,r,e,o){const u=t.length;for(;++o<u;)e=r(e,t[o]),n(e)&&(e=await e);return e},g=function(r,e,o){const u=r.length;let c=-1;for(void 0===o&&(o=r[++c]);++c<u;)if(o=e(o,r[c]),n(o))return o.then((f=v,a=e,l=t,s=c,(i=r)==t?((n,t,r,e)=>function(o){return n(o,t,r,e)})(f,a,l,s):a==t?((n,t,r,e)=>function(o){return n(t,o,r,e)})(f,i,l,s):l==t?((n,t,r,e)=>function(o){return n(t,r,o,e)})(f,i,a,s):((n,t,r,e)=>function(o){return n(t,r,e,o)})(f,i,a,l)));var f,i,a,l,s;return o},b=(n,t)=>function(...r){return t(n(...r))},w=(r,e)=>function(o,c){const f=r(o,c);return n(f)?f.then(u(e,t,c)):e(f,c)},j=function(n,o,c){const f=n[0];return e(f)?g(f,o,c):"function"==typeof f?"[object GeneratorFunction]"==l(f)?((n,e,o)=>b(n,r(y,t,e,o)))(f,o,c):(n=>"[object AsyncGeneratorFunction]"==l(n))(f)?((n,e,o)=>b(n,r(d,t,e,o)))(f,o,c):(a=j,s=t,v=1==n.length?w(o,f):n.reduce(w,o),x=c,s==t?((n,t,r)=>function(...e){return n(e,t,r)})(a,v,x):v==t?((n,t,r)=>function(...e){return n(t,e,r)})(a,s,x):((n,t,r)=>function(...e){return n(t,r,e)})(a,s,v)):null==f?void 0===c?u(o,f,t):o(c,f):"function"==typeof f[p]?y(f[p](),o,c):"function"==typeof f[h]?d(f[h](),o,c):"function"==typeof f.reduce?f.reduce(o,c):"function"==typeof f.chain?f.chain(u(o,c,t)):"function"==typeof f.flatMap?f.flatMap(u(o,c,t)):f.constructor==Object?g(i(f),o,c):void 0===c?u(o,f,t):o(c,f);var a,s,v,x},x=Object.assign,m=function(n,t){return null!=(r=t)&&r.length>0?function(n,t){const r=n.length,e=t.length;let o=-1;for(;++o<e;)n[r+o]=t[o];return n}(n,t):(n.push(t),n);var r},S="function"==typeof Buffer,O=S?Buffer.alloc:c,A=function(n,t){const r=n.length,e=S&&n.constructor==Buffer?O(r+t.length):new n.constructor(r+t.length);return e.set(n),e.set(t,r),e},B=function(n,t){return e(t)||o(t)?A(n,t):A(n,[t])},F=function(n,t){return null!=(r=t)&&"function"==typeof r.pipe?((n,t)=>new Promise(((n,t)=>function(r,e){var o,u;t.on("data",(n=>function(t,r,e){return n.write(t,r,e),n})(n)),t.on("end",(o=r,u=n,function(){return o(u)})),t.on("error",e)})(n,t)))(n,t):(n.write(t),n);var r},G=function(n,t){if(null!=t&&t.constructor==Set){for(const r of t)n.add(r);return n}return n.add(t)},M=function(n,t){return n.concat(t)},T=function(t,r,e){const o=j(t,r(c),null);return n(o)?o.then((u=e,function(){return u})):e;var u},I=function(r,c,i){if(e(i))return j(r,c(m),i);if(o(i)){const e=j(r,c(m),[]);return n(e)?e.then(u(B,i,t)):B(i,e)}if(null==i)return T(r,c,i);const a=i.constructor;return"string"==typeof i||a==String?j(r,c(f),i):"function"==typeof i.concat?j(r,c(M),i):"function"==typeof i.write?j(r,c(F),i):a==Set?j(r,c(G),i):a==Object?j(r,c(x),i):T(r,c,i)};return function(e,o){return"function"==typeof o?function(...u){const c=o(...u);return n(c)?c.then(r(I,u,e,t)):I(u,e,c)}:function(...n){return I(n,e,o)}}}());
